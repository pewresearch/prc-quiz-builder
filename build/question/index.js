(()=>{"use strict";var e,t={450:()=>{const e=window.wp.blocks;function t(e){var r,i,n="";if("string"==typeof e||"number"==typeof e)n+=e;else if("object"==typeof e)if(Array.isArray(e)){var o=e.length;for(r=0;r<o;r++)e[r]&&(i=t(e[r]))&&(n&&(n+=" "),n+=i)}else for(i in e)e[i]&&(n&&(n+=" "),n+=i);return n}const r=function(){for(var e,r,i=0,n="",o=arguments.length;i<o;i++)(e=arguments[i])&&(r=t(e))&&(n&&(n+=" "),n+=r);return n},i=window.prcHooks,n=window.wp.i18n,o=window.wp.element,s=window.wp.blockEditor,a=window.wp.data,l=window.wp.components,c=window.prcQuizSharedComponents,u=window.ReactJSXRuntime;function p({attributes:e,setAttributes:t,labels:r}){const{demoBreakValues:i}=e,o=void 0===i?r.map((()=>"")):JSON.parse(i).length!==r.length?[...JSON.parse(i),""]:JSON.parse(i);return(0,u.jsx)(c.JSONSortableList,{label:(0,n.__)("Demographic Break Values","prc-quiz"),help:(0,n.__)("If there are demographic breaks set in the controller block, the corresponding fields will appear here. You can assign values to each category on a per-question basis.","prc-quiz"),values:o,labels:r,onChange:e=>{t({demoBreakValues:JSON.stringify(e)})},disableAddingItems:!0,allowReset:!0})}function d({attributes:e,setAttributes:t,clientId:r,context:i}){const{uuid:o,internalId:a,type:d,randomizeAnswers:h,conditionalDisplay:y,conditionalAnswerUuid:w,question:g}=e,f=i["prc-quiz/type"],m=i["prc-quiz/demo-break-labels"],b="quiz"===f&&void 0!==m&&"thermometer"!==d;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(s.InspectorControls,{children:[(0,u.jsxs)(l.PanelBody,{title:(0,n.__)("Question Settings"),children:[(0,u.jsx)(l.TextareaControl,{label:(0,n.__)("Question Text","prc-quiz"),value:g,placeholder:(0,n.__)("Enter question text here..."),onChange:e=>t({question:e})}),"thermometer"!==d&&(0,u.jsx)(l.ToggleControl,{label:(0,n.__)("Randomize Answer Order","prc-quiz"),help:(0,n.__)("When enabled answer order will be randomized on the frontend. When disabled, answers will appear in the order they are defined in the block editor."),checked:h,onChange:()=>{t({randomizeAnswers:!h})}})]}),(0,u.jsx)(c.ConditionalPanel,{attributes:e,setAttributes:t,blockType:"question",children:(0,u.jsx)(c.UUIDCopyToClipboard,{uuid:o,label:(0,n.__)("Question ID")})})]}),(0,u.jsxs)(s.InspectorAdvancedControls,{children:[b&&(0,u.jsx)(p,{attributes:e,setAttributes:t,labels:void 0===m?[]:JSON.parse(m)}),(0,u.jsx)(l.BaseControl,{id:"question-internal-id",label:(0,n.__)("Internal ID"),help:(0,n.__)('This field identifies the question in the scoring process. If left empty, an auto-generated ID will be used. For "typology" or "freeform" quizzes, research teams often have an internal ID for scoring in their Excel file. Use that ID here for consistency.'),children:(0,u.jsx)(l.TextControl,{value:a,onChange:e=>t({internalId:e}),placeholder:(0,n.__)('Enter internal research ID e.g. "govsize3"')})})]})]})}const h=window.prcIcons;function y({variant:e="default"}){return"conditional"===e?(0,u.jsx)("span",{style:{color:"#f0b849"},children:(0,u.jsx)(h.Icon,{icon:"circle-question"})}):"thermometer"===e?(0,u.jsx)(h.Icon,{icon:"temperature-three-quarters"}):(0,u.jsx)(h.Icon,{icon:"circle-question"})}const w={questionAttributes:{style:{spacing:{blockGap:"var:preset|spacing|30"}},layout:{type:"flex",orientation:"horizontal",verticalAlignment:"center",justifyContent:"space-between",flexWrap:"wrap"}},questionInnerBlocks:[["core/paragraph",{metadata:{bindings:{content:{source:"prc-quiz/question"}}},fontSize:"medium"},[]],["core/group",{style:{spacing:{blockGap:"0"},layout:{selfStretch:"fixed",flexSize:"100%"}},layout:{type:"flex",flexWrap:"nowrap",justifyContent:"space-between"}},[["prc-quiz/answer",{answer:"0",points:0,style:{layout:{selfStretch:"fixed",flexSize:"10%"},border:{right:{width:"0px",style:"none"}}}},[["core/paragraph",{metadata:{bindings:{content:{source:"prc-quiz/answer"}}}},[]]]],["prc-quiz/answer",{answer:"10",points:1,style:{layout:{selfStretch:"fixed",flexSize:"10%"},border:{left:{width:"0px",style:"none"},top:{},right:{width:"0px",style:"none"},bottom:{}}}},[["core/paragraph",{placeholder:"Start typing your answer here...",metadata:{bindings:{content:{source:"prc-quiz/answer"}}}},[]]]],["prc-quiz/answer",{answer:"20",points:2,style:{layout:{selfStretch:"fixed",flexSize:"10%"},border:{left:{width:"0px",style:"none"},top:{},right:{width:"0px",style:"none"},bottom:{}}}},[["core/paragraph",{placeholder:"Start typing your answer here...",metadata:{bindings:{content:{source:"prc-quiz/answer"}}},style:{layout:{selfStretch:"fixed",flexSize:"10%"}}},[]]]],["prc-quiz/answer",{answer:"30",points:3,style:{layout:{selfStretch:"fixed",flexSize:"10%"},border:{left:{width:"0px",style:"none"},top:{},right:{width:"0px",style:"none"},bottom:{}}}},[["core/paragraph",{placeholder:"Start typing your answer here...",metadata:{bindings:{content:{source:"prc-quiz/answer"}}}},[]]]],["prc-quiz/answer",{answer:"40",points:4,style:{layout:{selfStretch:"fixed",flexSize:"10%"},border:{left:{width:"0px",style:"none"},top:{},right:{width:"0px",style:"none"},bottom:{}}}},[["core/paragraph",{placeholder:"Start typing your answer here...",metadata:{bindings:{content:{source:"prc-quiz/answer"}}}},[]]]],["prc-quiz/answer",{answer:"50",points:5,style:{layout:{selfStretch:"fixed",flexSize:"10%"},border:{left:{width:"0px",style:"none"},top:{},right:{width:"0px",style:"none"},bottom:{}}}},[["core/paragraph",{placeholder:"Start typing your answer here...",metadata:{bindings:{content:{source:"prc-quiz/answer"}}}},[]]]],["prc-quiz/answer",{answer:"60",points:6,style:{layout:{selfStretch:"fixed",flexSize:"10%"},border:{left:{width:"0px",style:"none"},top:{},right:{width:"0px",style:"none"},bottom:{}}}},[["core/paragraph",{placeholder:"Start typing your answer here...",metadata:{bindings:{content:{source:"prc-quiz/answer"}}}},[]]]],["prc-quiz/answer",{answer:"70",points:7,style:{layout:{selfStretch:"fixed",flexSize:"10%"},border:{left:{width:"0px",style:"none"},top:{},right:{width:"0px",style:"none"},bottom:{}}}},[["core/paragraph",{placeholder:"Start typing your answer here...",metadata:{bindings:{content:{source:"prc-quiz/answer"}}}},[]]]],["prc-quiz/answer",{answer:"80",points:8,style:{layout:{selfStretch:"fixed",flexSize:"10%"},border:{left:{width:"0px",style:"none"},top:{},right:{width:"0px",style:"none"},bottom:{}}}},[["core/paragraph",{placeholder:"Start typing your answer here...",metadata:{bindings:{content:{source:"prc-quiz/answer"}}}},[]]]],["prc-quiz/answer",{answer:"90",points:9,style:{layout:{selfStretch:"fixed",flexSize:"10%"},border:{left:{width:"0px",style:"none"},top:{},right:{width:"0px",style:"none"},bottom:{}}}},[["core/paragraph",{placeholder:"Start typing your answer here...",metadata:{bindings:{content:{source:"prc-quiz/answer"}}}},[]]]],["prc-quiz/answer",{answer:"100",points:10,style:{layout:{selfStretch:"fixed",flexSize:"10%"},border:{left:{width:"0px",style:"none"},top:{},bottom:{}}}},[["core/paragraph",{placeholder:"Start typing your answer here...",metadata:{bindings:{content:{source:"prc-quiz/answer"}}}},[]]]]]]]},g=[{name:"single-choice",isDefault:!0,title:(0,n.__)("Single Choice Question"),description:(0,n.__)("A question with a single correct answer"),attributes:{type:"single"},scope:["inserter","transform"],isActive:e=>"single"===e.type&&!e.conditionalDisplay},{name:"multiple-choice",title:(0,n.__)("Multiple Choice Question"),description:(0,n.__)("A question with multiple correct answers"),attributes:{type:"multiple"},scope:["inserter","transform"],isActive:e=>"multiple"===e.type&&!e.conditionalDisplay},{name:"thermometer",title:(0,n.__)("Thermometer Question"),description:(0,n.__)('A question with with a scale of answers, a "thermometer".'),icon:(0,u.jsx)(y,{variant:"thermometer"}),attributes:{type:"thermometer",...w.questionAttributes},scope:["inserter","transform"],innerBlocks:w.questionInnerBlocks,isActive:e=>"thermometer"===e.type},{name:"conditional-single-choice",title:(0,n.__)("Single Choice Question (Conditional)"),description:(0,n.__)("A single choice question that is only shown if a previous question is answered with a specific answer."),icon:(0,u.jsx)(y,{variant:"conditional"}),attributes:{type:"single",conditionalDisplay:!0},scope:["inserter","transform"],isActive:e=>"single"===e.type&&e.conditionalDisplay},{name:"conditional-multiple-choice",title:(0,n.__)("Multiple Choice Question (Conditional)"),description:(0,n.__)("A multiple choice question that is only shown if a previous question is answered with a specific answer."),icon:(0,u.jsx)(y,{variant:"conditional"}),attributes:{type:"multiple",conditionalDisplay:!0},scope:["inserter","transform"],isActive:e=>"multiple"===e.type&&e.conditionalDisplay}],f=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"prc-quiz/question","version":"4.0","title":"Question","description":"A question contains a set of answers, and other visual blocks. Choose from single, multiple choice, or thermometer question types.","category":"quiz","allowedBlocks":["prc-quiz/answer","core/group","core/paragraph","core/heading","core/image","core/list","core/video","videopress/video"],"attributes":{"question":{"type":"string"},"internalId":{"type":"string"},"randomizeAnswers":{"type":"boolean","default":false},"type":{"type":"string","default":"single","enum":["single","multiple","thermometer"]},"conditionalDisplay":{"type":"boolean","default":false},"conditionalAnswerUuid":{"type":"string"},"thermometerValues":{"type":"string"},"demoBreakValues":{"type":"string"},"uuid":{"type":"string"}},"supports":{"anchor":true,"html":false,"interactivity":true,"color":{"background":true,"text":true,"link":true,"button":true},"layout":{"default":{"type":"flex","orientation":"vertical","verticalAlignment":"center","justifyContent":"stretch"},"allowSwitching":true,"allowInheriting":true,"allowVerticalAlignment":true,"allowJustification":true,"allowOrientation":true,"allowSizingOnChildren":true},"spacing":{"blockGap":true,"margin":["top","bottom"],"padding":true},"typography":{"fontSize":true,"__experimentalFontFamily":true}},"parent":["prc-quiz/page"],"providesContext":{"prc-quiz/question/type":"type","prc-quiz/question/uuid":"uuid","prc-quiz/question/text":"question"},"usesContext":["prc-quiz/id","prc-quiz/type","prc-quiz/demo-break-labels","prc-quiz/uuids"],"textdomain":"question","editorScript":"file:./index.js","editorStyle":"file:./index.css","style":"file:./style-index.css","viewScriptModule":"file:./view.js"}'),{name:m}=f,b={icon:y,edit:function({attributes:e,setAttributes:t,context:l,clientId:c,__unstableLayoutClassNames:p}){const{question:h,type:y,uuid:w,conditionalDisplay:g}=e,f=l["prc-quiz/type"],m=l["prc-quiz/uuids"]||[],b=(0,s.useBlockProps)({className:r(p)}),x=(0,i.useHasSelectedInnerBlock)(c),{hasBlocks:q,answerBlocks:z}=(0,a.useSelect)((e=>{const{getBlocks:t,getClientIdsOfDescendants:r,getBlock:i}=e("core/block-editor"),n=t(c),o=r(c).filter((e=>{const t=i(e);return"prc-quiz/answer"===t?.name}));return{hasBlocks:n&&n.length>0,answerBlocks:o}}),[c]),_="thermometer"===y,S="freeform"!==f?{correct:!1}:{},v=(0,o.useMemo)((()=>[["core/paragraph",{fontSize:"medium",placeholder:(0,n.__)("Enter question text","prc-quiz"),metadata:{bindings:{content:{source:"prc-quiz/question"}}}}],["prc-quiz/answer",S,[["core/paragraph",{metadata:{bindings:{content:{source:"prc-quiz/answer"}}}}]]]]),[S]),k=(0,s.useInnerBlocksProps)(b,{templateLock:!!_&&"insert",template:v,renderAppender:x&&!_?s.InnerBlocks.ButtonBlockAppender:void 0,__experimentalDefaultBlock:{name:"prc-quiz/answer",attributes:S,innerBlocks:[["core/paragraph",{metadata:{bindings:{content:{source:"prc-quiz/answer"}}}}]]},__experimentalDirectInsert:!q});return(0,o.useEffect)((()=>{w&&Object.keys(m).includes(w)&&m[w]!==c&&(console.log("Setting new question uuid"),t({uuid:c})),w||t({uuid:c})}),[m]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(d,{attributes:e,setAttributes:t,clientId:c,context:l}),(0,u.jsx)("div",{...k})]})},save:function({attributes:e}){const t=s.useBlockProps.save(),r=s.useInnerBlocksProps.save(t);return(0,u.jsx)("div",{...r})},variations:g};(0,e.registerBlockBindingsSource)({name:"prc-quiz/question",label:(0,n.__)("Quiz Question","prc-quiz"),usesContext:["prc-quiz/question/text","prc-quiz/question/uuid"],getValues({select:e,context:t}){const r=t["prc-quiz/question/text"];return r?{content:r}:{}},setValues({select:e,dispatch:t,context:r,bindings:i}){const{newValue:n}=i.content,{getSelectedBlockClientId:o,getBlockRootClientId:a}=e(s.store),{updateBlockAttributes:l}=t(s.store);l(a(o()),{question:n})},canUserEditValue:({select:e,context:t})=>!0}),(0,e.registerBlockVariation)("core/paragraph",{name:"prc-quiz-question-text",title:(0,n.__)("Question Text","prc-quiz"),description:(0,n.__)("Displays the question text.","prc-quiz"),attributes:{fontSize:"medium",metadata:{bindings:{content:{source:"prc-quiz/question"}}}},isActive:(e,t)=>e.metadata?.bindings?.content?.source===t.metadata?.bindings.content.source}),(0,e.registerBlockType)(m,{...f,...b})}},r={};function i(e){var n=r[e];if(void 0!==n)return n.exports;var o=r[e]={exports:{}};return t[e](o,o.exports,i),o.exports}i.m=t,e=[],i.O=(t,r,n,o)=>{if(!r){var s=1/0;for(u=0;u<e.length;u++){for(var[r,n,o]=e[u],a=!0,l=0;l<r.length;l++)(!1&o||s>=o)&&Object.keys(i.O).every((e=>i.O[e](r[l])))?r.splice(l--,1):(a=!1,o<s&&(s=o));if(a){e.splice(u--,1);var c=n();void 0!==c&&(t=c)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[r,n,o]},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={646:0,754:0};i.O.j=t=>0===e[t];var t=(t,r)=>{var n,o,[s,a,l]=r,c=0;if(s.some((t=>0!==e[t]))){for(n in a)i.o(a,n)&&(i.m[n]=a[n]);if(l)var u=l(i)}for(t&&t(r);c<s.length;c++)o=s[c],i.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return i.O(u)},r=globalThis.webpackChunk_prc_quiz_builder=globalThis.webpackChunk_prc_quiz_builder||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var n=i.O(void 0,[754],(()=>i(450)));n=i.O(n)})();
//# sourceMappingURL=index.js.map
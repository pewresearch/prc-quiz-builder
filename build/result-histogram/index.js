(()=>{"use strict";var e,t={9405:()=>{const e=window.wp.blocks,t=window.wp.i18n,i=window.wp.element,a=window.wp.blockEditor,o=window.wp.data,n=window.wp.components,s=window.ReactJSXRuntime;function l({attributes:e,setAttributes:i,colors:o}){const{message:l,width:r,height:d,barLabelPosition:c,barLabelCutoff:b,yAxisDomain:g,xAxisLabel:h}=e,{barColor:u,setBarColor:p,isHighlightedColor:m,setIsHighlightedColor:x}=o;return(0,s.jsxs)(a.InspectorControls,{children:[(0,s.jsxs)(n.PanelBody,{title:(0,t.__)("Histogram Settings"),children:[(0,s.jsx)(n.TextareaControl,{label:"Score Message",help:(0,t.__)("You can add the score to your share message by using %s"),value:l,onChange:e=>{i({message:e})}}),(0,s.jsx)(n.RangeControl,{label:"Histogram Width",help:(0,t.__)("Width defaults to 640px"),value:r,onChange:e=>{i({width:e})},min:500,max:800}),(0,s.jsx)(n.RangeControl,{label:"Histogram Height",help:(0,t.__)("Height defaults to 300px"),value:d,onChange:e=>{i({height:e})},min:150,max:600}),(0,s.jsx)(n.RangeControl,{label:"Bar Label Position",help:(0,t.__)("Vertical position of bar label"),value:c,onChange:e=>{i({barLabelPosition:e})},min:-20,max:30}),(0,s.jsx)(n.__experimentalNumberControl,{label:"Bar Label Cut Off",help:(0,t.__)("Number at which to show label outside bar"),value:b,onChange:e=>{i({barLabelCutoff:e})},min:0,max:100}),(0,s.jsx)(n.RangeControl,{label:"Y Axis Domain",help:(0,t.__)("Set domain close to highest bar value"),value:g,onChange:e=>{i({yAxisDomain:e})},min:0,max:100}),(0,s.jsx)(n.TextControl,{label:"X Axis Label",value:h,onChange:e=>{i({xAxisLabel:e})}})]}),(0,s.jsx)(a.PanelColorSettings,{__experimentalHasMultipleOrigins:!0,__experimentalIsRenderedInSidebar:!0,title:(0,t.__)("Colors"),disableCustomColors:!0,colorSettings:[{value:u.color,onChange:p,label:(0,t.__)("Bar")},{value:m.color,onChange:x,label:(0,t.__)("Highlight")}]})]})}const r=window.prcChartBuilder,d=function({histogramData:e,width:t,height:a,barWidth:o,barLabelPosition:n,barLabelCutoff:l,barColor:d,isHighlightedColor:c,yAxisDomain:b,xAxisLabel:g}){const[h,u]=(0,i.useState)([]),p={...r.baseConfig,layout:{...r.baseConfig.layout,type:"bar",orientation:"vertical",theme:"light",parentClass:"wp-block-prc-quiz-result-histogram",width:t,height:a,padding:{top:0,bottom:70,left:0,right:0},horizontalRules:!1},metadata:{...r.baseConfig.metadata,active:!1},colors:[d],independentAxis:{...r.baseConfig.independentAxis,active:!0,domain:void 0,scale:"linear",domainPadding:50,offsetY:null,label:g,padding:50,tickCount:20,multiLineTickLabels:!1,multiLineTickLabelsBreak:1,abbreviateTicks:!1,abbreviateTicksDecimals:0,tickUnit:"",tickUnitPosition:"end",customTickFormat:null,tickLabels:{...r.baseConfig.independentAxis.tickLabels,fontSize:12,padding:5,angle:0,dx:0,dy:0,textAnchor:"middle",verticalAnchor:"middle"},axisLabel:{...r.baseConfig.independentAxis.axisLabel,fontSize:12,padding:20,fill:"rgba(35, 31, 32,0.7)",verticalAnchor:"middle",textAnchor:"middle",maxWidth:500},axis:{...r.baseConfig.independentAxis.axis,stroke:"#756f6b00"},ticks:{...r.baseConfig.independentAxis.ticks,stroke:"gray",size:5,strokeWidth:0},grid:{...r.baseConfig.independentAxis.grid,stroke:""}},dependentAxis:{...r.baseConfig.dependentAxis,active:!1,scale:"linear",padding:20,domain:[0,b],domainPadding:20,showZero:!1,tickCount:5,tickValues:null,tickFormat:null,multiLineTickLabels:!1,multiLineTickLabelsBreak:1,abbreviateTicks:!1,abbreviateTicksDecimals:0,tickUnit:"",tickUnitPosition:"end",tickLabels:{...r.baseConfig.dependentAxis.tickLabels,fontSize:12,padding:15,angle:0,dx:0,dy:0,textAnchor:"middle",verticalAnchor:"start"},axisLabel:{...r.baseConfig.dependentAxis.axisLabel,fontSize:12,padding:30,fill:"rgba(35, 31, 32,0.7)"},ticks:{...r.baseConfig.dependentAxis.ticks,stroke:"gray",size:5,strokeWidth:0},axis:{...r.baseConfig.dependentAxis.axis,stroke:"#756f6a"},grid:{...r.baseConfig.dependentAxis.grid,stroke:""},dateFormat:"yyyy"},dataRender:{...r.baseConfig.dataRender,x:"x",y:"y",x2:null,y2:null,sortKey:"x",sortOrder:"none",categories:["y"],xScale:"linear",yScale:"linear",xFormat:"yyyy",yFormat:"yyyy",isHighlightedColor:c},animate:{active:!1,duration:500},tooltip:{...r.baseConfig.tooltip,active:!1},legend:{...r.baseConfig.legend,active:!1},labels:{...r.baseConfig.labels,active:!0,showFirstLastPointsOnly:!1,color:"black",fontWeight:500,fontSize:12,labelBarPosition:"inside",labelCutoff:l,labelCutoffMobile:l,labelPositionDX:0,labelPositionDY:n,pieLabelRadius:60,abbreviateValue:!1,toFixedDecimal:0,labelUnit:"%",labelUnitPosition:"end",customLabelFormat:e=>1<e?`${e}%`:"<1%"}};return(0,i.useEffect)((()=>{if(e){const t=JSON.parse(e);console.log("Chart Data Parsed =",t);const i=t.map((e=>({x:`${e.x} `,y:parseFloat(e.y),__isHighlighted:{y:!!e.isHighlighted&&e.isHighlighted}})));console.log("Chart Data Normalized =",i),u([i])}}),[e]),(0,s.jsx)(r.ChartBuilderWrapper,{config:p,data:h})},c=[["core/table",{className:"histogram-data-table",head:[{cells:[{content:"# of Correct Answers",tag:"th"},{content:"% of Public",tag:"th"}]}],body:[{cells:[{content:"",tag:"td"},{content:"",tag:"td"}]},{cells:[{content:"",tag:"td"},{content:"",tag:"td"}]},{cells:[{content:"",tag:"td"},{content:"",tag:"td"}]},{cells:[{content:"",tag:"td"},{content:"",tag:"td"}]}]}]],b=(0,a.withColors)({barColor:"color"},{isHighlightedColor:"color"})((function({attributes:e,setAttributes:t,context:n,clientId:r,isSelected:b,barColor:g,setBarColor:h,isHighlightedColor:u,setIsHighlightedColor:p}){const{message:m,histogramData:x,width:f,height:C,barLabelPosition:y,barLabelCutoff:k,yAxisDomain:v,xAxisLabel:w}=e,L=(0,a.useBlockProps)(),A=(0,a.useInnerBlocksProps)(L,{template:c,templateLock:"all",allowedBlocks:["core/table"]}),_=(0,o.useSelect)((e=>e("core/block-editor").getBlocks(r).find((e=>"core/table"===e.name))),[r]);return(0,i.useEffect)((()=>{if(_){const e=_.attributes.body.map((e=>({x:e.cells[0].content,y:e.cells[1].content})));x!==JSON.stringify(e)&&t({histogramData:JSON.stringify(e)})}}),[_]),(0,s.jsxs)(i.Fragment,{children:[(0,s.jsx)(l,{attributes:e,setAttributes:t,colors:{barColor:g,setBarColor:h,isHighlightedColor:u,setIsHighlightedColor:p}}),(0,s.jsxs)("div",{...L,children:[(0,s.jsx)("p",{children:m}),(0,s.jsx)("div",{...A}),(0,s.jsxs)("div",{id:"score",children:[(0,s.jsxs)("h2",{children:["You answered ",(0,s.jsx)("span",{children:"X"})," questions correctly"]}),(0,s.jsx)("h3",{children:"You scored better than x% of the public, below y% of the public and the same as z% of the public."})]}),(0,s.jsx)(d,{histogramData:x,width:f,height:C,barLabelPosition:y,barColor:g.color,isHighlightedColor:u.color,yAxisDomain:v,xAxisLabel:w,barLabelCutoff:k})]})]})})),g=window.prcIcons,h=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"prc-quiz/result-histogram","version":"1.0.0","title":"Result Histogram","category":"prc-quiz","description":"Histogram representing distribution of scores.","attributes":{"message":{"type":"string"},"histogramData":{"type":"string"},"width":{"type":"number","default":640},"height":{"type":"number","default":300},"barWidth":{"type":"number","default":30},"barLabelPosition":{"type":"number","default":0},"barLabelCutoff":{"type":"number","default":0},"barColor":{"type":"string","default":"oatmeal"},"isHighlightedColor":{"type":"string","default":"mustard"},"yAxisDomain":{"type":"number","default":50},"xAxisLabel":{"type":"string"}},"supports":{"anchor":true,"html":false,"spacing":{"blockGap":true,"margin":["top","bottom"],"padding":true},"typography":{"fontSize":true,"__experimentalFontFamily":true}},"parent":["prc-quiz/results"],"usesContext":["prc-quiz/results/score"],"textdomain":"result-histogram","editorScript":"file:./index.js","editorStyle":"file:./index.css","viewScript":"file:./view.js","style":"file:./style-index.css","render":"file:./render.php"}'),{name:u}=h,p={icon:function(){return(0,s.jsx)(g.Icon,{icon:"chart-column"})},edit:b,save:function({attributes:e}){return(0,s.jsx)(a.InnerBlocks.Content,{})}};(0,e.registerBlockType)(u,{...h,...p})}},i={};function a(e){var o=i[e];if(void 0!==o)return o.exports;var n=i[e]={exports:{}};return t[e](n,n.exports,a),n.exports}a.m=t,e=[],a.O=(t,i,o,n)=>{if(!i){var s=1/0;for(c=0;c<e.length;c++){for(var[i,o,n]=e[c],l=!0,r=0;r<i.length;r++)(!1&n||s>=n)&&Object.keys(a.O).every((e=>a.O[e](i[r])))?i.splice(r--,1):(l=!1,n<s&&(s=n));if(l){e.splice(c--,1);var d=o();void 0!==d&&(t=d)}}return t}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[i,o,n]},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={96:0,744:0};a.O.j=t=>0===e[t];var t=(t,i)=>{var o,n,[s,l,r]=i,d=0;if(s.some((t=>0!==e[t]))){for(o in l)a.o(l,o)&&(a.m[o]=l[o]);if(r)var c=r(a)}for(t&&t(i);d<s.length;d++)n=s[d],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(c)},i=globalThis.webpackChunk_prc_quiz=globalThis.webpackChunk_prc_quiz||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})();var o=a.O(void 0,[744],(()=>a(9405)));o=a.O(o)})();
//# sourceMappingURL=index.js.map
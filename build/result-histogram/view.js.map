{"version":3,"file":"result-histogram/view.js","mappings":"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","sources":["webpack://@prc/quiz-builder/webpack/bootstrap","webpack://@prc/quiz-builder/webpack/runtime/define property getters","webpack://@prc/quiz-builder/webpack/runtime/hasOwnProperty shorthand","webpack://@prc/quiz-builder/external module \"@wordpress/interactivity\"","webpack://@prc/quiz-builder/./src/result-histogram/view.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","var x = (y) => {\n\tvar x = {}; __webpack_require__.d(x, y); return x\n} \nvar y = (x) => (() => (x))\nconst __WEBPACK_NAMESPACE_OBJECT__ = x({ [\"getContext\"]: () => (__WEBPACK_EXTERNAL_MODULE__wordpress_interactivity_8e89b257__.getContext), [\"store\"]: () => (__WEBPACK_EXTERNAL_MODULE__wordpress_interactivity_8e89b257__.store), [\"withSyncEvent\"]: () => (__WEBPACK_EXTERNAL_MODULE__wordpress_interactivity_8e89b257__.withSyncEvent) });","/**\n * WordPress Dependencies\n */\nimport {\n\tstore,\n\tgetContext,\n\twithScope,\n\twithSyncEvent,\n} from '@wordpress/interactivity';\n\n/**\n * Quiz Results Histogram Interactivity\n */\nconst clamp = (value, min, max) => Math.min(max, Math.max(min, value));\nconst toNumber = (v) => {\n\tconst n = Number(v);\n\treturn Number.isFinite(n) ? n : 0;\n};\n\nconst normalizeBins = (raw) => {\n\tconst source = Array.isArray(raw) ? raw : [];\n\treturn source\n\t\t.map((d) => ({ x: toNumber(d.x), y: toNumber(d.y) }))\n\t\t.filter((d) => Number.isFinite(d.x) && Number.isFinite(d.y));\n};\n\nconst formatPct = (n) => `${clamp(Math.round(n), 0, 100)}%`;\n\nconst { state, actions } = store('prc-quiz/controller', {\n\tstate: {\n\t\tget answeredCorrectly() {\n\t\t\treturn toNumber(state.score);\n\t\t},\n\t\tget sameAs() {\n\t\t\tconst { histogramData } = getContext();\n\t\t\tconst bins = normalizeBins(histogramData);\n\t\t\tconst s = toNumber(state.score);\n\t\t\tconst found = bins.find((b) => b.x === s);\n\t\t\treturn formatPct(found?.y ?? 0);\n\t\t},\n\t\tget betterThan() {\n\t\t\tconst { histogramData } = getContext();\n\t\t\tconst bins = normalizeBins(histogramData);\n\t\t\tconst s = toNumber(state.score);\n\t\t\tconst sum = bins.reduce((acc, b) => (b.x < s ? acc + b.y : acc), 0);\n\t\t\treturn formatPct(sum);\n\t\t},\n\t\tget lowerThan() {\n\t\t\tconst { histogramData } = getContext();\n\t\t\tconst bins = normalizeBins(histogramData);\n\t\t\tconst s = toNumber(state.score);\n\t\t\tconst sum = bins.reduce((acc, b) => (b.x > s ? acc + b.y : acc), 0);\n\t\t\treturn formatPct(sum);\n\t\t},\n\t\tget getBarStyle() {\n\t\t\tconst context = getContext();\n\t\t\tconst { bar } = context;\n\t\t\treturn `height: ${bar.height}; width: ${bar.width};`;\n\t\t},\n\t\tget histogramBars() {\n\t\t\tconst {\n\t\t\t\thistogramData,\n\t\t\t\theight = 300,\n\t\t\t\tbarLabelCutoff = 0,\n\t\t\t\tbarColor,\n\t\t\t\tisHighlightedColor,\n\t\t\t\tbarWidth,\n\t\t\t} = getContext();\n\t\t\tconst s = toNumber(state.score);\n\t\t\tconst bins = normalizeBins(histogramData);\n\t\t\tconst maxY = Math.max(1, ...bins.map((b) => b.y));\n\t\t\treturn bins.map((b) => {\n\t\t\t\tconst heightPct = (b.y / maxY) * 100;\n\t\t\t\tconst isHighlighted = b.x === s;\n\t\t\t\tconst label = b.y < 1 ? '<1%' : `${Math.round(b.y)}%`;\n\t\t\t\tconst ariaLabel = `${b.x} correct: ${Math.round(b.y)}%`;\n\t\t\t\treturn {\n\t\t\t\t\tx: b.x,\n\t\t\t\t\txLabel: String(b.x),\n\t\t\t\t\ty: b.y,\n\t\t\t\t\theight: `${heightPct}%`,\n\t\t\t\t\tbackground:\n\t\t\t\t\t\tisHighlighted && isHighlightedColor\n\t\t\t\t\t\t\t? isHighlightedColor\n\t\t\t\t\t\t\t: barColor || '#000',\n\t\t\t\t\tisHighlighted,\n\t\t\t\t\tlabel,\n\t\t\t\t\tariaLabel,\n\t\t\t\t\tbarColor,\n\t\t\t\t\tisHighlightedColor,\n\t\t\t\t\tshowOutside: b.y <= barLabelCutoff,\n\t\t\t\t\twidth: `${barWidth}px`,\n\t\t\t\t};\n\t\t\t});\n\t\t},\n\t},\n\tactions: {\n\t\t// Accessing state in template keeps it reactive; mount hook reserved for side-effects\n\t\tprepareHistogram: withSyncEvent(() => {}),\n\t},\n\tcallbacks: {},\n});\n"],"names":["__webpack_require__","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","y","__WEBPACK_EXTERNAL_MODULE__wordpress_interactivity_8e89b257__","x","d","toNumber","v","n","Number","isFinite","normalizeBins","raw","Array","isArray","map","filter","formatPct","value","Math","round","min","max","clamp","state","actions","store","answeredCorrectly","score","sameAs","_found$y","histogramData","getContext","bins","s","found","find","b","betterThan","sum","reduce","acc","lowerThan","getBarStyle","context","bar","height","width","histogramBars","barLabelCutoff","barColor","isHighlightedColor","barWidth","maxY","heightPct","isHighlighted","label","ariaLabel","xLabel","String","background","showOutside","prepareHistogram","withSyncEvent","callbacks"],"sourceRoot":""}
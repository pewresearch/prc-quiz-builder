(()=>{"use strict";var e,t={415:()=>{const e=window.wp.blocks;function t(e){var r,n,i="";if("string"==typeof e||"number"==typeof e)i+=e;else if("object"==typeof e)if(Array.isArray(e)){var o=e.length;for(r=0;r<o;r++)e[r]&&(n=t(e[r]))&&(i&&(i+=" "),i+=n)}else for(n in e)e[n]&&(i&&(i+=" "),i+=n);return i}const r=function(){for(var e,r,n=0,i="",o=arguments.length;n<o;n++)(e=arguments[n])&&(r=t(e))&&(i&&(i+=" "),i+=r);return i},n=window.wp.i18n,i=window.wp.element,o=window.wp.data,s=window.wp.blockEditor,c=window.wp.components,a=window.prcQuizSharedComponents,l=window.ReactJSXRuntime;function u({attributes:e,clientId:t,context:r,setAttributes:o,handleToggleCorrect:u}){const{uuid:p,points:d,correct:w,resultsLabel:h,answer:g}=e,y=r["prc-quiz/type"],f=(0,i.useCallback)((e=>{o({answer:e})}),[o]),b=(0,i.useCallback)((e=>{o({points:Number(e)})}),[o]),_=(0,i.useCallback)((e=>{o({resultsLabel:e})}),[o]);return(0,l.jsxs)(s.InspectorControls,{children:[(0,l.jsxs)(c.PanelBody,{title:(0,n.__)("Answer Settings"),children:[(0,l.jsx)(c.TextareaControl,{label:(0,n.__)("Answer Text","prc-quiz"),value:g,onChange:f,placeholder:(0,n.__)("Enter answer text here...")}),"freeform"!==y&&(0,l.jsx)(c.BaseControl,{help:(0,n.__)("Marking an answer as correct will automatically assign 1 point to the answer. Marking an answer as incorrect will automatically assign 0 points to the answer. You can modify these after initially marking the answer as correct or incorrect."),children:(0,l.jsx)(c.Button,{variant:"secondary",onClick:u,children:w?(0,n.__)("Mark as Incorrect","prc-quiz"):(0,n.__)("Mark as Correct","prc-quiz")})}),(0,l.jsx)(c.__experimentalNumberControl,{label:"Points",help:"How many points this answer is worth?",value:d,onChange:b,min:"freeform"===y?-1/0:0}),(0,l.jsx)(c.TextareaControl,{label:"Results Label",help:(0,n.__)("Use this as alternative text for the answer on the results page. You can elaborate on the message here. For example, the Results Table block will display this text for each answer instead of the answer text itself."),value:h,onChange:_})]}),(0,l.jsx)(a.ConditionalPanel,{attributes:e,setAttributes:o,blockType:"answer",children:(0,l.jsx)(a.UUIDCopyToClipboard,{uuid:p,label:(0,n.__)("Answer ID")})})]})}const p=window.prcIcons;function d({variant:e=""}){return"conditionalCorrect"===e?(0,l.jsx)("span",{style:{color:"#f0b849"},children:(0,l.jsx)(p.Icon,{icon:"circle-check"})}):"incorrect"===e?(0,l.jsx)(p.Icon,{icon:"circle-xmark"}):"conditionalIncorrect"===e?(0,l.jsx)("span",{style:{color:"#f0b849"},children:(0,l.jsx)(p.Icon,{icon:"circle-xmark"})}):"conditional"===e?(0,l.jsx)("span",{style:{color:"#f0b849"},children:(0,l.jsx)(p.Icon,{icon:"circle-question"})}):(0,l.jsx)(p.Icon,{icon:"circle-check"})}function w({context:e,correct:t,onToggle:r}){const o=e["prc-quiz/type"],c=(0,i.useMemo)((()=>"freeform"===o?[]:[{icon:(0,l.jsx)(d,{variant:t?"correct":"incorrect"}),title:t?(0,n.__)("Correct Answer"):(0,n.__)("Incorrect Answer"),isActive:t,onClick:()=>{r()}}]),[t,o,r]);return(0,l.jsx)(s.BlockControls,{controls:c})}function h({attributes:e}){const t=s.useBlockProps.save(),r=s.useInnerBlocksProps.save(t);return(0,l.jsx)("div",{...r})}const g=[{name:"answer",title:(0,n.__)("Answer"),description:(0,n.__)("An answer with neither a correct nor an incorrect choice."),isDefault:!0,icon:(0,l.jsx)(d,{}),scope:["inserter"],innerBlocks:[["core/paragraph",{placeholder:(0,n.__)("Start typing your answer here...","prc-quiz"),metadata:{bindings:{content:{source:"prc-quiz/answer"}}}}]],isActive:e=>void 0===e.correct&&!e.conditionalDisplay},{name:"answer-correct",title:(0,n.__)("Correct Answer"),description:(0,n.__)("A correct answer."),icon:(0,l.jsx)(d,{variant:"correct"}),attributes:{correct:!1},scope:[],isActive:e=>!0===e.correct&&!e.conditionalDisplay},{name:"answer-incorrect",title:(0,n.__)("Incorrect Answer"),description:(0,n.__)("An incorrect answer"),icon:(0,l.jsx)(d,{variant:"incorrect"}),attributes:{correct:!0},scope:[],isActive:e=>!1===e.correct&&!e.conditionalDisplay},{name:"conditional-answer",title:(0,n.__)("Answer"),description:(0,n.__)("An answer, neither incorrect nor correct. It is only shown if a previous question is answered with a specific answer."),icon:(0,l.jsx)(d,{variant:"conditional"}),attributes:{conditionalDisplay:!0},scope:[],isActive:e=>void 0===e.correct&&e.conditionalDisplay},{name:"conditional-answer-correct",title:(0,n.__)("Correct Answer"),description:(0,n.__)("An answer that is correct. It is only shown if a previous question is answered with a specific answer."),icon:(0,l.jsx)(d,{variant:"conditionalCorrect"}),attributes:{correct:!0,conditionalDisplay:!0},scope:[],isActive:e=>!0===e.correct&&e.conditionalDisplay},{name:"conditional-answer-incorrect",title:(0,n.__)("Incorrect Answer"),description:(0,n.__)("An answer that is incorrect. It is only shown if a previous question is answered with a specific answer."),icon:(0,l.jsx)(d,{variant:"conditionalIncorrect"}),attributes:{correct:!1,conditionalDisplay:!0},scope:[],isActive:e=>!1===e.correct&&e.conditionalDisplay}],y=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"prc-quiz/answer","version":"4.0","title":"Answer","description":"An answer choice for a question.","category":"quiz","allowedBlocks":["core/paragraph","core/heading","core/list","core/image","core/video","videopress/video","core/group"],"attributes":{"answer":{"type":"string"},"resultsLabel":{"type":"string"},"points":{"type":"number","default":0},"correct":{"type":"boolean"},"uuid":{"type":"string"},"conditionalDisplay":{"type":"boolean","default":false},"conditionalAnswerUuid":{"type":"string"}},"parent":["prc-quiz/question"],"supports":{"anchor":false,"html":false,"interactivity":true,"color":{"background":true,"text":true,"link":true,"button":true},"__experimentalBorder":{"color":true,"radius":true,"style":true,"width":true},"layout":{"type":"flex","default":{"type":"flex","orientation":"vertical","verticalAlignment":"center","justifyContent":"stretch","allowOrientation":true},"allowInheriting":true,"allowVerticalAlignment":true,"allowJustification":true,"allowOrientation":true,"allowSizingOnChildren":true},"spacing":{"margin":["top","bottom"],"padding":true},"typography":{"fontSize":true,"__experimentalFontFamily":true}},"usesContext":["prc-quiz/id","prc-quiz/type","prc-quiz/question/type","prc-quiz/question/uuid","prc-quiz/uuids"],"providesContext":{"prc-quiz/answer/text":"answer","prc-quiz/answer/correct":"correct","prc-quiz/answer/uuid":"uuid","prc-quiz/answer/points":"points"},"textdomain":"answer","editorScript":"file:./index.js","editorStyle":"file:./index.css","style":"file:./style-index.css","viewScriptModule":"file:./view.js"}'),{name:f}=y;var b,_;const x={edit:function({attributes:e,className:t,clientId:c,context:a,setAttributes:p,isSelected:d,insertBlocksAfter:h,__unstableLayoutClassNames:g}){const{correct:y,uuid:f,conditionalDisplay:b}=e,_=a["prc-quiz/uuids"]||[],x=a["prc-quiz/type"],m=a["prc-quiz/question/type"],{updateBlockAttributes:v}=(0,o.useDispatch)(s.store),q=()=>{if("freeform"===x)return;const e=!y;if("single"===m&&!0===e){const{getBlockParentsByBlockName:e,getClientIdsOfDescendants:t,getBlock:r}=(0,o.select)(s.store),[n]=e(c,"prc-quiz/question");n&&t(n).filter((e=>{const t=r(e);return"prc-quiz/answer"===t?.name&&e!==c})).forEach((e=>{v(e,{correct:!1,points:0})}))}p({correct:e,points:e?1:0})},k=(0,s.useBlockProps)({className:r(t,g,{"is-correct":y})}),z=(0,s.useInnerBlocksProps)(k,{template:[["core/paragraph",{placeholder:(0,n.__)("Start typing your answer here...","prc-quiz"),metadata:{bindings:{content:{source:"prc-quiz/answer"}}}}]]});return(0,i.useEffect)((()=>{f&&Object.keys(_).includes(f)&&_[f]!==c&&(console.log("Setting new answer uuid"),p({uuid:c})),f||p({uuid:c})}),[_]),(0,i.useEffect)((()=>{"freeform"===x&&p({correct:void 0})}),[x]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(u,{attributes:e,clientId:c,context:a,setAttributes:p,handleToggleCorrect:q}),(0,l.jsx)(w,{context:a,correct:y,onToggle:q}),(0,l.jsx)("div",{...z,children:z.children})]})},save:h,variations:g,deprecated:(b=y.attributes,_=y.supports,[{attributes:b,supports:_,save:h,migrate:(t,r)=>{const i=(0,e.createBlock)("core/paragraph",{placeholder:(0,n.__)("Start typing your answer here...","prc-quiz"),metadata:{bindings:{content:{source:"prc-quiz/answer"}}}});return(r.length<=0||!Array.isArray(r))&&(r=[i]),[t,r]},isEligible:(e,t)=>t.length<=0||!Array.isArray(t)}]),icon:d};(0,e.registerBlockBindingsSource)({name:"prc-quiz/answer",label:(0,n.__)("Quiz Answer","prc-quiz"),usesContext:["prc-quiz/answer/text","prc-quiz/answer/uuid"],getValues({select:e,context:t}){const r=t["prc-quiz/answer/text"];return r?{content:r}:{placeholder:(0,n.__)("Start typing your answer here!","prc-quiz")}},setValues({select:e,dispatch:t,context:r,bindings:n}){const{newValue:i}=n.content,{getSelectedBlockClientId:o,getBlockRootClientId:c}=e(s.store),{updateBlockAttributes:a}=t(s.store);a(c(o()),{answer:i})},canUserEditValue:({select:e,context:t})=>!0}),(0,e.registerBlockVariation)("core/paragraph",{name:"prc-quiz-answer-text",title:(0,n.__)("Answer Text","prc-quiz"),description:(0,n.__)("Displays the answer text.","prc-quiz"),attributes:{placeholder:(0,n.__)("Start typing your answer here...","prc-quiz"),metadata:{bindings:{content:{source:"prc-quiz/answer"}}}},ancestor:["prc-quiz/answer"],isActive:(e,t)=>e.metadata?.bindings?.content?.source===t.metadata?.bindings.content.source}),(0,e.registerBlockType)(f,{...y,...x})}},r={};function n(e){var i=r[e];if(void 0!==i)return i.exports;var o=r[e]={exports:{}};return t[e](o,o.exports,n),o.exports}n.m=t,e=[],n.O=(t,r,i,o)=>{if(!r){var s=1/0;for(u=0;u<e.length;u++){for(var[r,i,o]=e[u],c=!0,a=0;a<r.length;a++)(!1&o||s>=o)&&Object.keys(n.O).every((e=>n.O[e](r[a])))?r.splice(a--,1):(c=!1,o<s&&(s=o));if(c){e.splice(u--,1);var l=i();void 0!==l&&(t=l)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[r,i,o]},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={660:0,716:0};n.O.j=t=>0===e[t];var t=(t,r)=>{var i,o,[s,c,a]=r,l=0;if(s.some((t=>0!==e[t]))){for(i in c)n.o(c,i)&&(n.m[i]=c[i]);if(a)var u=a(n)}for(t&&t(r);l<s.length;l++)o=s[l],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(u)},r=globalThis.webpackChunk_prc_quiz_builder=globalThis.webpackChunk_prc_quiz_builder||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var i=n.O(void 0,[716],(()=>n(415)));i=n.O(i)})();
//# sourceMappingURL=index.js.map
{"version":3,"file":"answer/view.js","mappings":"oGAaA,MAAM,MAAEA,EAAK,QAAEC,GAAYC,EAAM,sBAAuB,CACvDF,MAAO,CACN,oBAAIG,GACH,MAAM,KAAEC,EAAI,aAAEC,EAAY,gBAAEC,GAAoBC,IAChD,OAAOD,EAAgBD,IAAeG,SAASJ,EAChD,GAEDH,QAAS,CAKRQ,cAAeC,EAAeC,IAC7BA,EAAMC,iBACN,MAAMC,EAAUN,KACV,IAAEO,GAAQC,KACV,KAAEX,EAAI,gBAAEE,EAAe,aAAEU,EAAY,aAAEX,GAC5CQ,EACD,GAAIC,EAAIG,aAAa,YACpB,OAGD,MAAMC,EAAiBZ,EAAgBD,IAAiB,GAClDc,EAAoBD,EAAeV,SAASJ,GAKhDS,EAAQP,gBAAgBD,GAHL,WAAjBW,GAA8C,gBAAjBA,EAC5BG,EAEqC,GAGA,CAACf,GAItCe,EAGFD,EAAeE,OAAQC,GAAaA,IAAajB,GAGV,IACpCc,EACHd,GAKHH,EAAQqB","sources":["webpack://@prc/quiz-builder/./src/answer/view.js"],"sourcesContent":["/**\n * WordPress Dependencies\n */\nimport {\n\tstore,\n\tgetContext,\n\tgetElement,\n\tgetServerContext,\n\twithScope,\n\twithSyncEvent,\n\tgetServerState,\n} from '@wordpress/interactivity';\n\nconst { state, actions } = store('prc-quiz/controller', {\n\tstate: {\n\t\tget isAnswerSelected() {\n\t\t\tconst { uuid, questionUuid, selectedAnswers } = getContext();\n\t\t\treturn selectedAnswers[questionUuid]?.includes(uuid);\n\t\t},\n\t},\n\tactions: {\n\t\t/**\n\t\t * When an answer is clicked, we need to add the answer's uuid to the private _selectedAnswers array.\n\t\t * The prc-quiz/question block will watch this array and update the controller's selectedAnswers context with each update.\n\t\t */\n\t\tonAnswerClick: withSyncEvent((event) => {\n\t\t\tevent.preventDefault();\n\t\t\tconst context = getContext();\n\t\t\tconst { ref } = getElement();\n\t\t\tconst { uuid, selectedAnswers, questionType, questionUuid } =\n\t\t\t\tcontext;\n\t\t\tif (ref.hasAttribute('disabled')) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst currentAnswers = selectedAnswers[questionUuid] || [];\n\t\t\tconst isAlreadySelected = currentAnswers.includes(uuid);\n\n\t\t\tif (questionType === 'single' || questionType === 'thermometer') {\n\t\t\t\tif (isAlreadySelected) {\n\t\t\t\t\t// Remove the answer if already selected\n\t\t\t\t\tcontext.selectedAnswers[questionUuid] = [];\n\t\t\t\t} else {\n\t\t\t\t\t// Add the answer if not selected\n\t\t\t\t\tcontext.selectedAnswers[questionUuid] = [uuid];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// For multiple choice questions, toggle the answer selection\n\t\t\t\tif (isAlreadySelected) {\n\t\t\t\t\t// Remove the answer if already selected\n\t\t\t\t\tcontext.selectedAnswers[questionUuid] =\n\t\t\t\t\t\tcurrentAnswers.filter((answerId) => answerId !== uuid);\n\t\t\t\t} else {\n\t\t\t\t\t// Add the answer if not selected\n\t\t\t\t\tcontext.selectedAnswers[questionUuid] = [\n\t\t\t\t\t\t...currentAnswers,\n\t\t\t\t\t\tuuid,\n\t\t\t\t\t];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tactions.saveQuizProgress();\n\t\t}),\n\t},\n});\n"],"names":["state","actions","store","isAnswerSelected","uuid","questionUuid","selectedAnswers","getContext","includes","onAnswerClick","withSyncEvent","event","preventDefault","context","ref","getElement","questionType","hasAttribute","currentAnswers","isAlreadySelected","filter","answerId","saveQuizProgress"],"sourceRoot":""}
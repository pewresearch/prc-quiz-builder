!function(){"use strict";var e,t={860:function(){var e=window.wp.blocks,t=window.React,i=window.wp.i18n,a=window.wp.element,o=window.wp.blockEditor,n=window.wp.data,l=window.wp.components;function r({attributes:e,setAttributes:a,colors:n}){const{message:r,width:s,height:c,barLabelPosition:d,barLabelCutoff:b,yAxisDomain:g,xAxisLabel:u}=e,{barColor:h,setBarColor:m,isHighlightedColor:p,setIsHighlightedColor:f}=n;return(0,t.createElement)(o.InspectorControls,null,(0,t.createElement)(l.PanelBody,{title:(0,i.__)("Histogram Settings")},(0,t.createElement)(l.TextareaControl,{label:"Score Message",help:(0,i.__)("You can add the score to your share message by using %s"),value:r,onChange:e=>{a({message:e})}}),(0,t.createElement)(l.RangeControl,{label:"Histogram Width",help:(0,i.__)("Width defaults to 640px"),value:s,onChange:e=>{a({width:e})},min:500,max:800}),(0,t.createElement)(l.RangeControl,{label:"Histogram Height",help:(0,i.__)("Height defaults to 300px"),value:c,onChange:e=>{a({height:e})},min:150,max:600}),(0,t.createElement)(l.RangeControl,{label:"Bar Label Position",help:(0,i.__)("Vertical position of bar label"),value:d,onChange:e=>{a({barLabelPosition:e})},min:-20,max:30}),(0,t.createElement)(l.__experimentalNumberControl,{label:"Bar Label Cut Off",help:(0,i.__)("Number at which to show label outside bar"),value:b,onChange:e=>{a({barLabelCutoff:e})},min:0,max:100}),(0,t.createElement)(l.RangeControl,{label:"Y Axis Domain",help:(0,i.__)("Set domain close to highest bar value"),value:g,onChange:e=>{a({yAxisDomain:e})},min:0,max:100}),(0,t.createElement)(l.TextControl,{label:"X Axis Label",value:u,onChange:e=>{a({xAxisLabel:e})}})),(0,t.createElement)(o.PanelColorSettings,{__experimentalHasMultipleOrigins:!0,__experimentalIsRenderedInSidebar:!0,title:(0,i.__)("Colors"),disableCustomColors:!0,colorSettings:[{value:h.color,onChange:m,label:(0,i.__)("Bar")},{value:p.color,onChange:f,label:(0,i.__)("Highlight")}]}))}var s=window.prcChartBuilder,c=function({histogramData:e,width:i,height:o,barWidth:n,barLabelPosition:l,barLabelCutoff:r,barColor:c,isHighlightedColor:d,yAxisDomain:b,xAxisLabel:g}){const[u,h]=(0,a.useState)([]),m={...s.baseConfig,layout:{...s.baseConfig.layout,type:"bar",orientation:"vertical",theme:"light",parentClass:"wp-block-prc-quiz-result-histogram",width:i,height:o,padding:{top:0,bottom:70,left:0,right:0},horizontalRules:!1},metadata:{...s.baseConfig.metadata,active:!1},colors:[c],independentAxis:{...s.baseConfig.independentAxis,active:!0,domain:void 0,scale:"linear",domainPadding:50,offsetY:null,label:g,padding:50,tickCount:20,multiLineTickLabels:!1,multiLineTickLabelsBreak:1,abbreviateTicks:!1,abbreviateTicksDecimals:0,tickUnit:"",tickUnitPosition:"end",customTickFormat:null,tickLabels:{...s.baseConfig.independentAxis.tickLabels,fontSize:12,padding:5,angle:0,dx:0,dy:0,textAnchor:"middle",verticalAnchor:"middle"},axisLabel:{...s.baseConfig.independentAxis.axisLabel,fontSize:12,padding:20,fill:"rgba(35, 31, 32,0.7)",verticalAnchor:"middle",textAnchor:"middle",maxWidth:500},axis:{...s.baseConfig.independentAxis.axis,stroke:"#756f6b00"},ticks:{...s.baseConfig.independentAxis.ticks,stroke:"gray",size:5,strokeWidth:0},grid:{...s.baseConfig.independentAxis.grid,stroke:""}},dependentAxis:{...s.baseConfig.dependentAxis,active:!1,scale:"linear",padding:20,domain:[0,b],domainPadding:20,showZero:!1,tickCount:5,tickValues:null,tickFormat:null,multiLineTickLabels:!1,multiLineTickLabelsBreak:1,abbreviateTicks:!1,abbreviateTicksDecimals:0,tickUnit:"",tickUnitPosition:"end",tickLabels:{...s.baseConfig.dependentAxis.tickLabels,fontSize:12,padding:15,angle:0,dx:0,dy:0,textAnchor:"middle",verticalAnchor:"start"},axisLabel:{...s.baseConfig.dependentAxis.axisLabel,fontSize:12,padding:30,fill:"rgba(35, 31, 32,0.7)"},ticks:{...s.baseConfig.dependentAxis.ticks,stroke:"gray",size:5,strokeWidth:0},axis:{...s.baseConfig.dependentAxis.axis,stroke:"#756f6a"},grid:{...s.baseConfig.dependentAxis.grid,stroke:""},dateFormat:"yyyy"},dataRender:{...s.baseConfig.dataRender,x:"x",y:"y",x2:null,y2:null,sortKey:"x",sortOrder:"none",categories:["y"],xScale:"linear",yScale:"linear",xFormat:"yyyy",yFormat:"yyyy",isHighlightedColor:d},animate:{active:!1,duration:500},tooltip:{...s.baseConfig.tooltip,active:!1},legend:{...s.baseConfig.legend,active:!1},labels:{...s.baseConfig.labels,active:!0,showFirstLastPointsOnly:!1,color:"black",fontWeight:500,fontSize:12,labelBarPosition:"inside",labelCutoff:r,labelCutoffMobile:r,labelPositionDX:0,labelPositionDY:l,pieLabelRadius:60,abbreviateValue:!1,toFixedDecimal:0,labelUnit:"%",labelUnitPosition:"end",customLabelFormat(e){return 1<e?`${e}%`:"<1%"}}};return(0,a.useEffect)((()=>{if(e){const t=JSON.parse(e);console.log("Chart Data Parsed =",t);const i=t.map((e=>({x:`${e.x} `,y:parseFloat(e.y),__isHighlighted:{y:!!e.isHighlighted&&e.isHighlighted}})));console.log("Chart Data Normalized =",i),h([i])}}),[e]),(0,t.createElement)(s.ChartBuilderWrapper,{config:m,data:u})};const d=[["core/table",{className:"histogram-data-table",head:[{cells:[{content:"# of Correct Answers",tag:"th"},{content:"% of Public",tag:"th"}]}],body:[{cells:[{content:"",tag:"td"},{content:"",tag:"td"}]},{cells:[{content:"",tag:"td"},{content:"",tag:"td"}]},{cells:[{content:"",tag:"td"},{content:"",tag:"td"}]},{cells:[{content:"",tag:"td"},{content:"",tag:"td"}]}]}]];var b=(0,o.withColors)({barColor:"color"},{isHighlightedColor:"color"})((function({attributes:e,setAttributes:i,context:l,clientId:s,isSelected:b,barColor:g,setBarColor:u,isHighlightedColor:h,setIsHighlightedColor:m}){const{message:p,histogramData:f,width:C,height:x,barLabelPosition:y,barLabelCutoff:k,yAxisDomain:v,xAxisLabel:w}=e,L=(0,o.useBlockProps)(),A=(0,o.useInnerBlocksProps)(L,{template:d,templateLock:"all",allowedBlocks:["core/table"]}),_=(0,n.useSelect)((e=>e("core/block-editor").getBlocks(s).find((e=>"core/table"===e.name))),[s]);return(0,a.useEffect)((()=>{if(_){const e=_.attributes.body.map((e=>({x:e.cells[0].content,y:e.cells[1].content})));f!==JSON.stringify(e)&&i({histogramData:JSON.stringify(e)})}}),[_]),(0,t.createElement)(a.Fragment,null,(0,t.createElement)(r,{attributes:e,setAttributes:i,colors:{barColor:g,setBarColor:u,isHighlightedColor:h,setIsHighlightedColor:m}}),(0,t.createElement)("div",{...L},(0,t.createElement)("p",null,p),(0,t.createElement)("div",{...A}),(0,t.createElement)("div",{id:"score"},(0,t.createElement)("h2",null,"You answered ",(0,t.createElement)("span",null,"X")," questions correctly"),(0,t.createElement)("h3",null,"You scored better than x% of the public, below y% of the public and the same as z% of the public.")),(0,t.createElement)(c,{histogramData:f,width:C,height:x,barLabelPosition:y,barColor:g.color,isHighlightedColor:h.color,yAxisDomain:v,xAxisLabel:w,barLabelCutoff:k})))})),g=window.prcIcons,u=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"prc-quiz/result-histogram","version":"0.1.0","title":"Result Histogram","category":"prc-quiz","description":"Histogram representing distribution of scores.","attributes":{"message":{"type":"string"},"histogramData":{"type":"string"},"width":{"type":"number","default":640},"height":{"type":"number","default":300},"barWidth":{"type":"number","default":30},"barLabelPosition":{"type":"number","default":0},"barLabelCutoff":{"type":"number","default":0},"barColor":{"type":"string","default":"oatmeal"},"isHighlightedColor":{"type":"string","default":"mustard"},"yAxisDomain":{"type":"number","default":50},"xAxisLabel":{"type":"string"}},"supports":{"anchor":true,"html":false,"spacing":{"blockGap":true,"margin":["top","bottom"],"padding":true},"typography":{"fontSize":true,"__experimentalFontFamily":true}},"parent":["prc-quiz/results"],"usesContext":["prc-quiz/results/score"],"textdomain":"result-histogram","editorScript":"file:./index.js","editorStyle":"file:./index.css","viewScript":"file:./view.js","style":"file:./style-index.css","render":"file:./render.php"}');const{name:h}=u,m={icon:function(){return(0,t.createElement)(g.Icon,{icon:"chart-column"})},edit:b,save:function({attributes:e}){return(0,t.createElement)(o.InnerBlocks.Content,null)}};(0,e.registerBlockType)(h,{...u,...m})}},i={};function a(e){var o=i[e];if(void 0!==o)return o.exports;var n=i[e]={exports:{}};return t[e](n,n.exports,a),n.exports}a.m=t,e=[],a.O=function(t,i,o,n){if(!i){var l=1/0;for(d=0;d<e.length;d++){i=e[d][0],o=e[d][1],n=e[d][2];for(var r=!0,s=0;s<i.length;s++)(!1&n||l>=n)&&Object.keys(a.O).every((function(e){return a.O[e](i[s])}))?i.splice(s--,1):(r=!1,n<l&&(l=n));if(r){e.splice(d--,1);var c=o();void 0!==c&&(t=c)}}return t}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[i,o,n]},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={826:0,431:0};a.O.j=function(t){return 0===e[t]};var t=function(t,i){var o,n,l=i[0],r=i[1],s=i[2],c=0;if(l.some((function(t){return 0!==e[t]}))){for(o in r)a.o(r,o)&&(a.m[o]=r[o]);if(s)var d=s(a)}for(t&&t(i);c<l.length;c++)n=l[c],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(d)},i=self.webpackChunkresult_histogram=self.webpackChunkresult_histogram||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var o=a.O(void 0,[431],(function(){return a(860)}));o=a.O(o)}();
//# sourceMappingURL=index.js.map